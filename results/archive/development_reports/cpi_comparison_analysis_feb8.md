# CPI Comparison Analysis — February 8, 2026

## Executive Summary

**PR #376 has successfully merged and provided critical baseline CPI accuracy data.** The three-way comparison (M2 Hardware vs Full Pipeline vs Fast Timing) reveals significant accuracy gaps that validate the need for ongoing calibration efforts.

## Key Findings

### Fast Timing Engine Performance vs M2 Hardware Baseline

| Benchmark Type | M2 Hardware CPI | Fast Timing CPI | Error % | Assessment |
|----------------|-----------------|------------------|---------|------------|
| **Arithmetic** | 0.296 | 1.000 | **238.1%** | **CRITICAL** - Fast timing severely oversimplified |
| **Dependency** | 1.088 | 1.000 | **8.8%** | **EXCELLENT** - Well within 15% target |
| **Branch** | 1.304 | 1.250 | **4.3%** | **EXCELLENT** - Well within 15% target |

### Full Pipeline Engine Performance vs M2 Hardware Baseline

| Benchmark Type | M2 Hardware CPI | Full Pipeline CPI | Error % | Assessment |
|----------------|------------------|-------------------|---------|------------|
| **Arithmetic** | 0.296 | 0.400 | **35.2%** | **HIGH** - Still significant gap |
| **Dependency** | 1.088 | 1.200 | **10.3%** | **GOOD** - Within reasonable range |
| **Branch** | 1.304 | 1.600 | **22.7%** | **MODERATE** - Needs improvement |

## Critical Analysis

### Priority 1: Arithmetic Operations (238% Fast / 35% Full Error)
- **Root Cause**: Fast timing uses CPI=1.0 for all arithmetic, ignoring superscalar execution
- **Impact**: Arithmetic workloads completely inaccurate in fast timing mode
- **Solution**: Leo's same-cycle forwarding implementation (PR #370/issue #370) should directly address this
- **Expected Improvement**: Target reduction from 35% → ~15% for full pipeline

### Priority 2: Dependency Chain Handling (8.8% Fast / 10.3% Full Error)
- **Status**: **CALIBRATED** - Both engines perform excellently
- **Analysis**: Dependency tracking appears well-modeled in both engines
- **No action required**

### Priority 3: Branch Prediction (4.3% Fast / 22.7% Full Error)
- **Interesting Result**: Fast timing actually outperforms full pipeline on branches
- **Analysis**: Full pipeline may be over-modeling branch penalties
- **Lower priority** - fast timing branch model is surprisingly accurate

## Immediate Action Items

1. **Monitor Leo's same-cycle forwarding (PR #370)** - Should significantly improve arithmetic accuracy
2. **Validate matmul calibration readiness** - Once PR #379 MADD/UBFM gap is resolved
3. **Investigate branch over-modeling** - Why does fast timing outperform full pipeline?

## Baseline Validation

These results **confirm the accuracy baseline** established in my previous analysis:
- Arithmetic: 35.2% error (confirmed, critical priority)
- Dependency: 10.3% error (confirmed, excellent performance)
- Branch: 22.7% error (confirmed, moderate priority)
- **Average: 22.8% error** (previously calculated 71.9% using fast timing - now corrected)

## Next Steps

1. **Track PR #370 impact** - Re-run comparison after same-cycle forwarding merge
2. **Enable matmul calibration** - Support issue #359 when MADD/UBFM is fixed
3. **Refine branch modeling** - Investigate why full pipeline over-estimates branch penalties

---
*Generated by Alex (Data Analysis Specialist) from CPI comparison workflow artifacts*